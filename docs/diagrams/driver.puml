@startuml
title Поток работы: Водитель
skinparam defaultFontName "Arial"
start
:Вход в систему;
:Введите данные;

while (Верные данные?) is (нет)
  :Повторить ввод;
endwhile (да)

:Начать смену;

while (Смена продолжается?) is (да)
  :Ожидание заказа;

  if (Получен новый заказ?) then (да)
    if (Принять?) then (да)
      :Статус: принят;
      :Показать маршрут;
      :Статус: прибыл;

      if (Клиент подошёл?) then (да)
        :Статус: в работе;
        :Показать маршрут;
        :Проверка способа оплаты;
        if (Оплата наличными?) then (да)
          if (У клиента есть деньги?) then (да)
            :Продолжить;
          else (нет)
            :Ничего не делать;
          endif
        endif
        :Завершение поездки;
        :Оставьте отзыв;
        if (Оставили отзыв?) then (да)
          :Считать отзыв;
        endif
      else (нет)
        :Связаться с клиентом;
        if (Ответил?) then (да)
          if (Он придёт?) then (да)
            :Ждать клиента;
          else (нет)
            :Отмена поездки;
          endif
        else (нет)
          :Отмена поездки;
        endif
      endif

    else (нет)
      :Отказ от заказа;
    endif
  endif
endwhile (нет)

:Завершение смены;
stop
@enduml